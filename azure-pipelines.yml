trigger:
- main

pool: ak

stages:
  - stage: terraformtask
    jobs:
      - job: terraforminit
        displayName: 'terraform init'
        steps:
          - task: TerraformTask@5
            inputs:
             provider: 'azurerm'
             command: 'init'
             backendServiceArm: 'Azure subscription 1(a24be557-68c8-4061-8e03-00e95b3924da)'
             backendAzureRmStorageAccountName: 'backup4389'
             backendAzureRmContainerName: 'backup'
             backendAzureRmKey: 'tf'

      - job: terraformplan
        displayName: 'terraform plan'
        steps:
          - task: TerraformTask@5
            inputs:
              provider: 'azurerm'
              command: 'plan'
              environmentServiceNameAzureRM: 'Azure subscription 1(a24be557-68c8-4061-8e03-00e95b3924da)'
              